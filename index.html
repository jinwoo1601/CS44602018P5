<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<script src="http://d3js.org/d3.v4.min.js"></script>	  
	</head>
	<body>
		<script>

			var ratings = ["PG-13", "R", "PG", "G", "Unrated", "NC-17", "TV-MA", "Not Listed"];
			var ratingsGross = [0, 0, 0, 0, 0, 0, 0, 0];

			var dataTree = {
				"name": "data",
				"children": [
					{
						"name": "PG-13",
						"value": 33850049614
					},
					{
						"name": "R",
						"value": 15684997614
					},
					{
						"name": "PG",
						"value": 15077401596
					},
					{
						"name": "G",
						"value": 1540370967
					},
					{
						"name": "Unrated",
						"value": 1009472
					},
					{
						"name": "NC-17",
						"value": 4000304
					},
					{
						"name": "TV-MA",
						"value": 894186
					}
				]
			}

			d3.csv("movies.csv", function(csv) {
				for (var i=0; i < csv.length; ++i) {
					csv[i].gross = Number(csv[i].gross);
					switch (csv[i].content_rating) {
						case ratings[0]:
							ratingsGross[0] += csv[i].gross;
							break;
						case ratings[1]:
							ratingsGross[1] += csv[i].gross;
							break;
						case ratings[2]:
							ratingsGross[2] += csv[i].gross;
							break;
						case ratings[3]:
							ratingsGross[3] += csv[i].gross;
							break;
						case ratings[4]:
							ratingsGross[4] += csv[i].gross;
							break;
						case ratings[5]:
							ratingsGross[5] += csv[i].gross;
							break;
						case ratings[6]:
							ratingsGross[6] += csv[i].gross;
							break;
						case ratings[7]:
							ratingsGross[7] += csv[i].gross;
							break;
					}
				}
			});
			var rootNode = d3.hierarchy(dataTree, function(d) {return d.children;});
		
			rootNode.sum(function(d) {
				return d.value;
			});
			console.log(rootNode);
			console.log(rootNode.value);
			var treemap = d3.treemap(rootNode);
			console.log(treemap);
			// console.log(dataTree.sum(function(d) {return d.gross;}));
		</script>
	</body>
</html>
